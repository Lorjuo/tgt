<div class="page-header">
  <%= link_to new_user_path, :class => 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    New User
  <% end if can? :create, User %>
  <h1>Listing users</h1>
</div>

<%= will_paginate @users %>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <% if can? :update, User %>
      <th></th>
      <% end %>
      <% if can? :destroy, User %>
      <th></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
<% @users.each do |user| %>
    <tr>
      <td><%= link_to user.name, user %></td>
      <td>
        <%# mail_to user.email, nil, :replace_at => "(at)", :replace_dot => "(dot)", :class => "email" %>
        <%= mail_to user.email, encode: "hex", :class => "email" do %>
          <span class="glyphicon glyphicon-envelope"></span> Email
        <% end %>
      </td>
      <% if can? :update, user %>
      <td><%= link_to 'Edit', edit_user_path(user) %></td>
      <% end %>
      <% if can? :destroy, user %>
      <td>
        <%= link_to user, method: :delete, data: { confirm: 'Are you sure?' } do %>
          <span class="glyphicon glyphicon-trash"></span> Destroy
        <% end %>
      </td>
      <% end %>
    </tr>
<% end %>
  </tbody>
</table>

<%= will_paginate @users %>
