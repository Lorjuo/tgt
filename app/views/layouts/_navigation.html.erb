<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container"> <!-- Needed to center the navbar content -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <%= image_tag 'tgt-logo_small.png', :id => 'logoSmall' %>
      <%= link_to "/", :class => "navbar-brand" do %>
        TG Traisa
      <% end %>
    </div>
    <div class="collapse navbar-collapse" id="navigation">
      <ul class="nav navbar-nav">
        <%= render :partial => "layouts/top_level_navigation", collection: NavigationElement.top_level.roots, :as => :navigation_element %>
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <% if current_user && current_user.has_role?('editor') %>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <%= t ".administration" %>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <%= content_tag :li do %>
                  <%= link_to(Announcement.model_name.human(:count => :lots), announcements_path) %>
              <% end if current_user.can?(:edit, :announcements) %>
              <%= content_tag :li do %>
                  <%= link_to(User.model_name.human(:count => :lots), users_path) %>
              <% end if current_user.can?(:edit, :users) %>
            </ul>
          </li>
        <% end %>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <%= t ".account" %>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <% if user_signed_in? %>
              <li>
              <%= link_to(t('.edit_account'), edit_user_registration_path) %>
              </li>
              <li>
              <%= link_to(t('.logout'), destroy_user_session_path(:referring_page => request.fullpath), :method=>'delete') %>        
              </li>
            <% else %>
              <li>
              <%= link_to(t('.sign_up'), new_user_registration_path)  %>
              </li>
              <li>
              <%= link_to(t('.login'), new_user_session_path(:referring_page => request.fullpath)) %>  
              </li>
            <% end %>
            <%= content_tag :li do %>
              <%= link_to "English", locale: :en %>
            <% end unless I18n.locale == :en %>
            <%= content_tag :li do %>
              <%= link_to "Deutsch", locale: :de %>
            <% end unless I18n.locale == :de %>
          </ul>
        </li>

        <!--<li><a href="#about"><%= t ".about" %></a></li>-->
        <li>
          <a href="#">
            <span class="visible-xs">XS</span>
            <span class="visible-sm">SM</span>
            <span class="visible-md">MD</span>
            <span class="visible-lg">LG</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
