<% debugger %>
<%#= cache link do %>
  <%= content_tag :li, :class => "dropdown" do %>
    <%#= link_to link.url do %>
    <%= link_to link.url,
      :class => "dropdown-toggle",
      :data => (link.leaf?) ? {} : {:toggle => "dropdown"} do %>
      <%= link.name %>
      <%= tag :span, :class => "caret" unless link.leaf? %>
    <% end %>
    <% if link.children.present? %>
    <%# unless link.leaf? %>
      <%= content_tag :ul, :class => "dropdown-menu" do %>
        <%# Template Dependency: layouts/sub_level_navigation %>
        <%= render :partial => "layouts/sub_level_navigation", collection: link.children, :as => :link %>
      <% end %>
    <% end %>
  <% end %>
<%# end %>