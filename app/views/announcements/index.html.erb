<% content_for :title do %>
  <%= t ".title" %>
<% end %>

<% content_for :buttons do %>
  <%= link_to new_announcement_path, :class => 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    <%= t('general.create_model', :model => Announcement.model_name.human ) %>
  <% end if can? :create, Announcement %>
<% end %>

<div class="window box">
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th><%= Announcement.human_attribute_name("name") %></th>
        <th><%= Announcement.human_attribute_name("content") %></th>
        <th><%= Announcement.human_attribute_name("link") %></th>
        <th><%= Announcement.human_attribute_name("active") %></th>
        <th></th>
        <% if can? :update, Announcement %>
        <th></th>
        <% end %>
        <% if can? :destroy, Announcement %>
        <th></th>
        <% end %>
      </tr>
    </thead>

    <tbody>
  <% @announcements.each do |announcement| %>
      <tr>
        <td><%= announcement.name %></td>
        <td>
          <%= truncate(strip_tags(announcement.content), length: 320, omission: '') %>
        </td>
        <td><%= announcement.link %></td>
        <td><%= announcement.active %></td>
        <td><%= link_to t("general.show"), announcement %></td>
        <% if can? :update, announcement %>
        <td><%= link_to t("general.edit"), edit_announcement_path(announcement) %></td>
        <% end %>
        <% if can? :destroy, announcement %>
        <td>
          <%= link_to announcement, method: :delete, data: { confirm: t('general.are_you_sure') } do %>
            <span class="glyphicon glyphicon-trash"></span>
            <%= t "general.destroy" %>
          <% end %>
        </td>
        <% end %>
      </tr>
  <% end %>
    </tbody>
  </table>
</div>
