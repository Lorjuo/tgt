<% content_for :title do %>
  <%= t ".title", :title => @message.title %>
<% end %>

<% content_for :head do %>
  <meta property='og:type' content='article'/>

  <% if @message.image.present? %>
    <meta property='og:image' content='<%= request.host + @message.image.file_url %>' />
    <meta name='twitter:image' content='<%= request.host + @message.image.file_url %>' />
  <% end %>

  <meta property='og:url' content='<%= message_url(@message) %>' />
  <meta name='twitter:url' content='<%= message_url(@message) %>' />

  <% description = truncate(strip_tags(@message.content), length: 240, omission: '...', :separator => ' ') %>
  <meta property='og:description' content='<%= description %>' />
  <meta name='twitter:description' content='<%= description %>' />
  <meta itemprop='description' content='<%= description %>'>
<% end %>

<div class="window box thin">
  <div class="message">
    <div class="messageHeader">
      <div class="pull-right button-group">
        <%= link_to department_messages_path(@message.department), :class => 'btn btn-default' do %>
          <span class="glyphicon glyphicon-list-alt"></span>
          Back
        <% end %>
        <% if can? :update, @message %>
          <%= link_to edit_message_path(@message), :class => 'btn btn-primary' do %>
          <span class="glyphicon glyphicon-pencil"></span>
            Edit
          <% end %>
        <% end %>
      </div>
      <h1><%= @message.title %></h1>
    </div>
    <div class="messageContent">
      <%= raw @message.content %>
    </div>
    <div class="messageFooter">
      <div class="date">
        <%= localize( @message.created_at, :format => :short_full ) %>
      </div>
      <div class="share">
        <%= render :partial => "shared/social_media_share" %>
      </div>
    </div>
    <%= render :partial => "shared/references_to", :locals => { references: @message.references } %>
  </div>
</div>